From 13481bfe3cc93ca420aa2bc352cd4f1f16f4423d Mon Sep 17 00:00:00 2001
From: Lovely_xianxian <xyx_dada@outlook.com>
Date: Fri, 27 Mar 2020 08:55:56 +0800
Subject: [PATCH] Disallow Dragon Egg To Duplicate

---
 .../java/net/minecraft/server/EntityFallingBlock.java  |  2 ++
 src/main/java/xianxian/mc/nebula/NebulaConfig.java     | 10 ++++++++++
 2 files changed, 12 insertions(+)

diff --git a/src/main/java/net/minecraft/server/EntityFallingBlock.java b/src/main/java/net/minecraft/server/EntityFallingBlock.java
index 6697b945..130cdc0d 100644
--- a/src/main/java/net/minecraft/server/EntityFallingBlock.java
+++ b/src/main/java/net/minecraft/server/EntityFallingBlock.java
@@ -66,6 +66,7 @@ public class EntityFallingBlock extends Entity {
     public void tick() {
         // Paper start - fix sand duping
         if (this.dead) {
+            if (xianxian.mc.nebula.NebulaConfig.fixSandDuping || (xianxian.mc.nebula.NebulaConfig.disallowDragonEggToDuplicate && this.getBlock().getBlock() instanceof BlockDragonEgg))
             return;
         }
         // Paper end - fix sand duping
@@ -93,6 +94,7 @@ public class EntityFallingBlock extends Entity {
 
             // Paper start - fix sand duping
             if (this.dead) {
+                if (xianxian.mc.nebula.NebulaConfig.fixSandDuping || (xianxian.mc.nebula.NebulaConfig.disallowDragonEggToDuplicate && this.getBlock().getBlock() instanceof BlockDragonEgg))
                 return;
             }
             // Paper end - fix sand duping
diff --git a/src/main/java/xianxian/mc/nebula/NebulaConfig.java b/src/main/java/xianxian/mc/nebula/NebulaConfig.java
index 4efb035b..8726e69c 100644
--- a/src/main/java/xianxian/mc/nebula/NebulaConfig.java
+++ b/src/main/java/xianxian/mc/nebula/NebulaConfig.java
@@ -216,4 +216,14 @@ public class NebulaConfig {
             }
         }
     }
+
+    public static boolean disallowDragonEggToDuplicate = true;
+    private static void disallowDragonEggToDuplicate() {
+        disallowDragonEggToDuplicate = getBoolean("game-mechanics.disallow-dragon-egg-to-duplicate", true);
+    }
+
+    public static boolean fixSandDuping = true;
+    private static void fixSandDuping() {
+        fixSandDuping = getBoolean("fix-sand-duping", true);
+    }
 }
\ No newline at end of file
-- 
2.27.0

