From 6f9baa7fd647728a9441559ca648aecea8f90fc2 Mon Sep 17 00:00:00 2001
From: Lovely_xianxian <xyx_dada@outlook.com>
Date: Fri, 27 Dec 2019 21:53:33 +0800
Subject: [PATCH] Configurable ItemFrame breaking in glass

---
 src/main/java/net/minecraft/server/EntityItemFrame.java | 5 +++++
 src/main/java/xianxian/mc/nebula/NebulaWorldConfig.java | 7 +++++++
 2 files changed, 12 insertions(+)

diff --git a/src/main/java/net/minecraft/server/EntityItemFrame.java b/src/main/java/net/minecraft/server/EntityItemFrame.java
index f8a2f32f..f246e209 100644
--- a/src/main/java/net/minecraft/server/EntityItemFrame.java
+++ b/src/main/java/net/minecraft/server/EntityItemFrame.java
@@ -95,6 +95,11 @@ public class EntityItemFrame extends EntityHanging {
 
     @Override
     public boolean survives() {
+    	// Nebula start - Configurable ItemFrame breaking in glass
+    	if (!this.world.nebulaConfig.itemFrameBreakInGlass && this.world.getType(this.blockPosition).getBlock() instanceof BlockGlass) {
+    		return true;
+    	}
+    	// Nebula end
         if (!this.world.getCubes(this)) {
             return false;
         } else {
diff --git a/src/main/java/xianxian/mc/nebula/NebulaWorldConfig.java b/src/main/java/xianxian/mc/nebula/NebulaWorldConfig.java
index 5cc4ab54..84485572 100644
--- a/src/main/java/xianxian/mc/nebula/NebulaWorldConfig.java
+++ b/src/main/java/xianxian/mc/nebula/NebulaWorldConfig.java
@@ -73,4 +73,11 @@ public class NebulaWorldConfig {
     	}
     	log("Phantom spawn rate: " + (phantomSpawnRate == -1 ? "No phantom will spawn" : (phantomSpawnRate + "%")));
     }
+
+	public boolean itemFrameBreakInGlass = true;
+	private void itemFrameBreakInGlass() {
+		itemFrameBreakInGlass = getBoolean("item-frame-break-in-glass", true);
+	}
+
+	
 }
-- 
2.24.0

